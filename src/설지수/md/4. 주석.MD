# 04. 주석

    나쁜 코드에 주석을 달지 마라. 새로 짜라. - 브라이언 W.커니핸, P.J 플라우거

잘 달린 주석은 그 어떤 정보보다 유용하다. 하지만 저자는 주석은 기껏해야 **필요악**이라 말한다.

코드로 의도를 표현하지 못해서, 주석 없이는 자신(코드)을 표현할 방법을 찾지 못해서
할 수 없이 주석을 사용한다.

저자가 주석을 무시하는 이유
주석은 오래될수록 코드에서 멀어진다. 프로그래머들이 주석을 유지하고 보수하기란
현실적으로 불가능하기 때문.

코드에 주석을 추가하는 일반적인 이유는 코드 품질이 나쁘기 때문.

## 좋은 주석
어떤 주석은 필요하거나 유익하다. 그 예시

- 법적인 주석 : 꼭 법적인 이유로 넣는 게 아닌 어떤 단체나 회사에서 넣기로 약속한 사항들
- 정보를 제공하는 주석 : 메서드가 반환할 값, 형식 등등
- 의도를 설명하는 주석 
- 의미를 명료하게 밝히는 주석 : 인수나 반환값 자체를 명확하게 만들면 좋겠지만,
반환값이 표준 라이브러리나 변경하지 못하는 코드에 속한다면 반환값을 밝히는게 낫다.
```java
assertTrue(a.compareTo(a) == 0); // a == a
assertTrue(a.compareTo(a) !== 0); // a != b
assertTrue(a.compareTo(b) == -1); // a < b
assertTrue(a.compareTo(b) == 1); // a > b

```
- 결과를 경고하는 주석 : 실행 결과가 일반적이지 않을 때, 미리 결과값을 경고하는 주석
```java
 // 예시

 // 이 메서드 실행시 IDE가 꺼집니다.
 inteliJ.shutdown();
```
- TODO 주석 : TODO List 처럼 앞으로 할 일, 지금 구현하지 않았지만 필요한 기능이나
미래에 필요 없어질 클래스나 고쳐야 할 메서드 등등을 미리 주석으로 남겨둔다.
- 중요성을 강조하는 주석 : 대수롭지 않게 여길 뭔가의 중요성을 강조하기 위해 남겨둔다.
```java
    String listItemContent = match.group(3).trim();
    // 여기서 trim()은 매우 중요, trim 메서드는 문자열에서 시작 공백을 제거한다.
    // 문자열에 시작 공백이 있으면 다른 문자열로 인식되기 때문
```

## 나쁜 주석
나쁜 주석의 예시

- 주절거리는 주석 : 특별한 이유 없이 의무감으로 혹은 프로세스에서 하라고 하니까
쓰는 주석은 일반적으로 독자와 제대로 소통할 수 없다. 그런 주석은 어차피 이해가 안되어 다른 모듈까지 뒤져야 한다.

- 같은 이야기를 중복하는 주석 : 주석으로 같은 코드 내용을 그대로 중복해서 쓰는 것,
이런 코드는 자칫하면 코드보다 주석을 읽는 시간이 더 오래 걸릴 수 있다.
```java
    // this.closed가 true일 때 반환되는 유틸리티 메서드다.
    // 타임아웃에 도달하면 예외를 던진다.

    public synchronized void waitForClose(final long timeoutMillis) throws Exception{ 
        
        if (!closed)
        {
            wait(timeoutMillis);
            if (!closed)
                throw new Exception("MockResponseSender could not be closed");
        }
    }
```

- 오해할 여지가 있는 주석 : 때때로 의도는 좋았으나 프로그래머가 딱 맞을 정도로 상세하게
 주석을 달지 못하기도 한다. 이 때 어느 프로그래머는 실행했을 때의 예상한 값을 얻지 못할 수 있다.
- 의무적으로 다는 주석 : 의무적으로 달면 주절거리는 주석이 된다.
- 이력을 기록하는 주석 : 예전에는 모든 모듈 천머리에 변경 이력을 기록하고 관리하는 관례가 바람직했지만,
지금은 소스 코드 관리 시스템이 있으므로, 제거하는 편이 좋다.
- 있으나 마나 한 주석 : 너무 당연한 사실을 언급하는 주석, 같은 이야기를 중복하는 주석과 같다.
- 위치를 표현하는 주석 :  소스 파일에서 특정 위치를 표시하려 사용하는 주석, 반드시 필요할 때만
 아주 드물게 사용하자. 너무 남용하면 잡소리처럼 보인다.
- 닫는 괄호에 다는 주석 : 닫는 괄호에 헷갈리지 않으려고 달아 놓는 주석, 닫는 괄호에
주석을 달아야겠다는 생각이 든다면 차라리 함수를 줄이려 시도하자.
```java
try {
        while ((line = in.readLine()) != null) {
        ...
        } // while
        } // try
        catch (IOException e) {
        ...
        } // catch
```
- 공로를 돌리거나 저자를 표시하는 주석 : 아래와 같은 정보는 소스 코드 관리 시스템에 저장하는 편이 좋다.
```java
    /* wltn가 만듬 */
```

- 주석으로 처리한 코드 : 주석으로 처리된 코드는 다른 사람들이 지우기를 주저한다.
 '중요하니까 지우면 안되겠지 ?', '남겨 놓은 이유가 있을꺼야' 라고 생각하기 때문이다. 위 내용처럼
소스 코드 관리 시스템이 우리를 대신해 기억해주므로 삭제해야 한다.
```java
    InputStreamResponse response = new InputStreamResponse();
//    InputStream resultsStream = formatter.getResultStream();
//    StreamReader reader = new StreamReader(resultsStream);
```
- HTML 주석 : 혐오 그 자체라 한다. 주석에 html 태그를 삽입해야 하는 책임은
프로그래머가 아니라 도구가 져야 한다.
```java
/**
 * 적합성 테스트를 수행하기 위한 과업
 * 이 과업은 적합성 테스트를 수행해 결과를 출력한다.
 * <p/>
 * <pre>
 * 용법:
 * &lt;taskdef name=&quot;execute-fitnesse-tests&quot;
 */
```

- 전역 정보 : 주석을 달아야 한다면 근처에 있는 코드에 대한 내용만 설명해서 주석을 달아라.
- 너무 많은 정보 : 주석에 관련 없는 정보를 서술하지 마라. 독자에게 불필요한 정보다.
- 모호한 관계
```java
/*
* 모든 픽셀을 담을 만큼 충분한 배열로 시작한다(여기에 필터 바이트를 더한다).
* 그리고 헤더 정보를 위해 200바이트를 더한다.
*/
this.pngBytes = new byte[((this.width + 1) * this.height * 3) + 200];
```
 위 예시 코드에서 `필터 바이트`란 무엇인가? `200 바이트`를 추가하는 이유는?
 주석을 다는 목적은 코드만으로 설명할 수 없어서 이다. **주석과 주석이 설명하는 코드는 둘 사이의 관계가 명백해야 한다**.
 
- 비공개 코드에서의 JavaDocs : 유용하지 않을 뿐 아니라 JavaDocs 주석이 요구하는 형식 때문에 코드가 보기 싫어진다.

